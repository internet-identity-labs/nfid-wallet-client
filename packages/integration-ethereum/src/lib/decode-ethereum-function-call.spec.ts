import { BigNumber } from "ethers"
import { decodeEthereumFunctionCall } from "./decode-ethereum-function-call"

describe("integrationRarible", () => {
  it("should work", async () => {
    const encodedData = "0x0d5f7d350000000000000000000000000000000000000000000000000000000000000020000000000000000000000000c92c5a6eafa8e67b5b151ec35ba83f54d1a761580000000000000000000000000000000000000000000000000000000000000001d8f960c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e0000000000000000000000000000000000000000000000000000009184e72a0000000000000000000000000000000000000000000000000000000000000000000d985dfb7a83aa81b34a9ae7ab812de5efe24b7425e13c96243ae73e1af3d4e3600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064591b8b23d235ef0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004e00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000009184e72a0000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000068000000000000000000000000000000000000000000000000000000000000002e0000000000000000000000000d8560c88d1dc85f9ed05b25878e366c49b68bef90000000000000000000000000000000000000000000000000000000000000040c92c5a6eafa8e67b5b151ec35ba83f54d1a7615800000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000000412f697066732f6261666b726569687a6d37706833786576657973726a36746935693366336762716133766f3633747872716965696b786972756a78616469747871000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000c92c5a6eafa8e67b5b151ec35ba83f54d1a7615800000000000000000000000000000000000000000000000000000000000027100000000000000000000000000000000000000000000000000000000000000001000000000000000000000000c92c5a6eafa8e67b5b151ec35ba83f54d1a7615800000000000000000000000000000000000000000000000000000000000003e8000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000041341ee9927e6417bae908f53dd6c9147246777ed7a064a9475650a8f821bea8522946ae4a1c86b29389af8eb71d4278b9bbc8107aeca9a6fc2895045a2589ddc81c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000d6ffd79b52a587a0a9941a61f4e6cb0d386d545800000000000000000000000000000000000000000000000000000000000000fa00000000000000000000000000000000000000000000000000000000000000415b4f24f19e840ac7d58b7d3e7a5a1efccc50bb483273a90589139545083c29e6388ef25776358d5e6182f94b11c2b6c04315400238eaa0f670f1cf602b103bf21c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012345678900000000000000000000000000123456789face09616c6c64617461"
    expect(await decodeEthereumFunctionCall(encodedData)).toEqual({
      "method": "directPurchase",
      "types": [
        "(address,uint256,bytes4,bytes,uint256,address,uint256,uint256,uint256,bytes4,bytes,bytes,uint256,uint256,bytes)"
      ],
      "inputs": [
        [
          "0xc92C5A6EaFA8E67b5B151Ec35bA83F54D1a76158",
          expect.any(BigNumber),
          "0xd8f960c1",
          "0x000000000000000000000000d8560c88d1dc85f9ed05b25878e366c49b68bef90000000000000000000000000000000000000000000000000000000000000040c92c5a6eafa8e67b5b151ec35ba83f54d1a7615800000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000000412f697066732f6261666b726569687a6d37706833786576657973726a36746935693366336762716133766f3633747872716965696b786972756a78616469747871000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000c92c5a6eafa8e67b5b151ec35ba83f54d1a7615800000000000000000000000000000000000000000000000000000000000027100000000000000000000000000000000000000000000000000000000000000001000000000000000000000000c92c5a6eafa8e67b5b151ec35ba83f54d1a7615800000000000000000000000000000000000000000000000000000000000003e8000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000041341ee9927e6417bae908f53dd6c9147246777ed7a064a9475650a8f821bea8522946ae4a1c86b29389af8eb71d4278b9bbc8107aeca9a6fc2895045a2589ddc81c00000000000000000000000000000000000000000000000000000000000000",
          expect.any(BigNumber),
          "0x0000000000000000000000000000000000000000",
          expect.any(BigNumber),
          expect.any(BigNumber),
          expect.any(BigNumber),
          "0x23d235ef",
          "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000d6ffd79b52a587a0a9941a61f4e6cb0d386d545800000000000000000000000000000000000000000000000000000000000000fa",
          "0x5b4f24f19e840ac7d58b7d3e7a5a1efccc50bb483273a90589139545083c29e6388ef25776358d5e6182f94b11c2b6c04315400238eaa0f670f1cf602b103bf21c",
          expect.any(BigNumber),
          expect.any(BigNumber),
          "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        ]
      ],
      "names": [
        [
          "direct",
          [
            "sellOrderMaker",
            "sellOrderNftAmount",
            "nftAssetClass",
            "nftData",
            "sellOrderPaymentAmount",
            "paymentToken",
            "sellOrderSalt",
            "sellOrderStart",
            "sellOrderEnd",
            "sellOrderDataType",
            "sellOrderData",
            "sellOrderSignature",
            "buyOrderPaymentAmount",
            "buyOrderNftAmount",
            "buyOrderData"
          ]
        ]
      ]
    })
  })
})
